Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1};Array.prototype.remove=function(e){var t=this.indexOf(e);if(t>=0)return this.splice(t,1);else return this};String.prototype.capitalize=function(){if(this.length==0)return"";return this.charAt(0).toUpperCase()+this.splice(1)};String.prototype.title=function(){return this.split(" ").map(function(e){return r.capitalize()}).join(" ")};String.prototype.trim=function(){return this.replace(/^\s+|\s+$/gm,"")};String.prototype.ltrim=function(){return this.replace(/^\s+/gm,"")};String.prototype.rtrim=function(){return this.replace(/\s+$/gm,"")};String.prototype.format=function(e){return this.replace(/{(\d+)}/g,function(t,n){return e[n]!=undefined?e[n]:t})};String.prototype.escapeRegExp=function(){return this.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")};String.prototype.startsWith=function(e){return this.substring(0,e.length)==e};String.prototype.endsWith=function(e){return this.substring(this.length-e.length)==e};String.prototype.times=function(e){var t;for(k=0;k<e;k++)t=t+this;return t};if(!Object.prototype.watch){Object.defineProperty(Object.prototype,"watch",{enumerable:false,configurable:true,writable:false,value:function(e,t){var n=this[e],r=n;var i=function(){return r};var s=function(i){n=r;return r=t.call(this,e,n,i)};if(delete this[e]){Object.defineProperty(this,e,{get:i,set:s,enumerable:true,configurable:true})}}})}if(!Object.prototype.unwatch){Object.defineProperty(Object.prototype,"unwatch",{enumerable:false,configurable:true,writable:false,value:function(e){var t=this[e];delete this[e];this[e]=t}})}my=function(){function t(e){return e&&{}.toString.call(e)==="[object Function]"}var e={};e.range=function(e,t,n){if(t==undefined){t=e;e=0}var r=[];for(var i=e;i<t;i+=n||1)r.push(i);return r};e.sum=function(e,t){var n=0;for(var r=0;r<e.length;r++)n+=e[r];return n};e.keys=function(e,t){var n=[];for(var r in e)n.push(r);if(t)n.sort();return n};e.values=function(e){return keys(e).map(function(t){return e[t]})};e.items=function(e){return keys(e).map(function(t){return[t,e[t]]})};e.len=function(e){if(e instanceof Array)return e.length;else return keys(e).length};e.clone=function(e){return JSON.parse(JSON.stringify(e))};e.debounce=function(e,t){t||(t=250);var n=null;return function(){var r=this,i=arguments;clearTimeout(n);n=setTimeout(function(){e.apply(r,i)},t)}};e.throttle=function(e,t,n){t||(t=250);var r,i;return function(){var s=n||this;var o=+(new Date),u=arguments;if(r&&o<r+t){clearTimeout(i);i=setTimeout(function(){r=o;e.apply(s,u)},t)}else{r=o;e.apply(s,u)}}};e.tag=function(e,t){e=e||"div";t=t||{};var n=function(){var n=arguments.callee;var r=[];for(var i in arguments)r[i]=arguments[i];if(!n.Tag)n.Tag=function(e,t,n){this.name=e;this.components=t;this.attrtibutes=n;this.toString=function(){var r="";for(var i in n)r='{0} {1}="{2}"'.format([r,i,n[i]]);if("img br link".split(" ").indexOf(e)<0){var s=t.map(function(e){return e.toString()}).join("");return"<{0}{1}>{2}</{0}>".format([e,r,s])}else{return"<{0}{1}/>".format([e,r])}}};return new arguments.callee.Tag(e,r,t)};return n};e.events={};e.register=function(t,n,r){if(t in e.events)e.events[t].push([n,r]);else e.events[t]=[[n,r]]};e.trigger=function(t,n){if(t in e.events)e.events[t]=e.events[t].filter(function(e){e[0](n);if(!e[1])return e})};e.promise_counter=0;e.run=function(t,n){var r=e.promise();try{r.resolve(t(n))}catch(i){r.reject(i)}return r};e.promise=function(){var t=function(){this.code=e.promise_counter++;this.resolved=false;this.rejected=false;this.obj=null;this.resolve=function(t){this.resolved=true;this.obj=t;e.trigger(this.code+":resolved",t)};this.reject=function(t){this.rejected=true;this.obj=t;e.trigger(this.code+":rejected",t)};this.then=function(t,n){t=t||function(e){return e};if(n=="always")n=t;n=n||function(e){throw e};if(this.resolved){return e.run(t,this.obj)}else if(this.rejected){return e.run(n,this.obj)}else{var r=e.promise();e.register(this.code+":resolved",function(e){try{r.resolve(t(e))}catch(n){r.reject(n)}});e.register(this.code+":rejected",function(e){try{r.resolve(n(e))}catch(t){r.reject(t)}});return r}}};return new t};e.sleep=function(t){var n=e.promise();setTimeout(function(){n.resolve()},t);return n};e.model_counter=0;e.model=function(n){var r=e.model_counter++;var i="model-change:{0}".format([r]);delete e.events[i];for(var s in n){if(!t(n[s])){n.watch(s,function(t,n,r){if(r!=n){e.trigger(i,[t,n,r])}return r})}}n.onChangeCall=function(t){e.register(i,function(e){t.apply(null,e)})};n.linkToTemplate=function(t){var r=jQuery(t);var i=r.html();var s=function(){var t=Mustache.render(i,n);r.html(t);r.find("[my-bind]").each(function(){var t=jQuery(this);var r=t.attr("id");var i=function(){var e=t.attr("my-bind");n[e]=t.val();s();input=jQuery("[my-bind={0}]".format([e]));input.focus().val("").val(n[e])};t.on("keyup change",e.throttle(i,1e3))})};s()};return n};return e}()